<!--pages/my/index.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-bg"></view>
    <view class="user-content">
      <view class="user-avatar-wrap" bindtap="onAvatarTap">
        <image class="user-avatar" src="{{userInfo.avatar || '/images/avatar-default.png'}}" mode="aspectFill" />
        <view class="avatar-edit" wx:if="{{isLogin}}">
          <text class="edit-icon">ğŸ“·</text>
        </view>
      </view>
      <view class="user-info" bindtap="onLoginTap">
        <text class="user-name">{{isLogin ? userInfo.nickname : 'ç‚¹å‡»ç™»å½•'}}</text>
        <text class="user-id" wx:if="{{isLogin}}">ID: {{userInfo.id}}</text>
        <text class="login-tip" wx:else="{{!isLogin}}">ç™»å½•åäº«å—æ›´å¤šæœåŠ¡</text>
      </view>
      <view class="user-arrow" wx:if="{{!isLogin}}">
        <text class="arrow-icon">></text>
      </view>
    </view>
  </view>

  <!-- æ•°æ®ç»Ÿè®¡ -->
  <view class="stats-section" wx:if="{{isLogin}}">
    <view class="stats-item" bindtap="onStudyTap">
      <text class="stats-num">{{stats.studyHours || 0}}</text>
      <text class="stats-label">å­¦ä¹ æ—¶é•¿(å°æ—¶)</text>
    </view>
    <view class="stats-item" bindtap="onCourseTap">
      <text class="stats-num">{{stats.courseCount || 0}}</text>
      <text class="stats-label">æˆ‘çš„è¯¾ç¨‹</text>
    </view>
    <view class="stats-item" bindtap="onOrderTap">
      <text class="stats-num">{{stats.orderCount || 0}}</text>
      <text class="stats-label">æˆ‘çš„è®¢å•</text>
    </view>
    <view class="stats-item" bindtap="onCollectTap">
      <text class="stats-num">{{stats.collectCount || 0}}</text>
      <text class="stats-label">æˆ‘çš„æ”¶è—</text>
    </view>
  </view>

  <!-- æˆ‘çš„è®¢å• -->
  <view class="menu-section">
    <view class="section-header">
      <text class="section-title">æˆ‘çš„è®¢å•</text>
      <text class="section-more" bindtap="onAllOrderTap">æŸ¥çœ‹å…¨éƒ¨ ></text>
    </view>
    <view class="order-menu">
      <view class="order-item" bindtap="onOrderStatusTap" data-status="0">
        <view class="order-icon-wrap">
          <text class="order-icon">ğŸ›’</text>
          <view class="order-badge" wx:if="{{orderStats.unpaid > 0}}">{{orderStats.unpaid}}</view>
        </view>
        <text class="order-label">å¾…ä»˜æ¬¾</text>
      </view>
      <view class="order-item" bindtap="onOrderStatusTap" data-status="1">
        <view class="order-icon-wrap">
          <text class="order-icon">ğŸ“¦</text>
        </view>
        <text class="order-label">å·²ä»˜æ¬¾</text>
      </view>
      <view class="order-item" bindtap="onOrderStatusTap" data-status="2">
        <view class="order-icon-wrap">
          <text class="order-icon">âœ…</text>
        </view>
        <text class="order-label">å·²å®Œæˆ</text>
      </view>
      <view class="order-item" bindtap="onAfterSaleTap">
        <view class="order-icon-wrap">
          <text class="order-icon">ğŸ”„</text>
        </view>
        <text class="order-label">å”®å/é€€æ¬¾</text>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="section-title">å¸¸ç”¨åŠŸèƒ½</view>
    <view class="menu-list">
      <view class="menu-item" bindtap="onStudyRecordTap">
        <view class="menu-icon-wrap">
          <text class="menu-icon">ğŸ“š</text>
        </view>
        <text class="menu-label">å­¦ä¹ è®°å½•</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="onMyCourseTap">
        <view class="menu-icon-wrap">
          <text class="menu-icon">ğŸ“</text>
        </view>
        <text class="menu-label">æˆ‘çš„è¯¾ç¨‹</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="onMyCollectTap">
        <view class="menu-icon-wrap">
          <text class="menu-icon">â­</text>
        </view>
        <text class="menu-label">æˆ‘çš„æ”¶è—</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="onCouponTap">
        <view class="menu-icon-wrap">
          <text class="menu-icon">ğŸ«</text>
        </view>
        <text class="menu-label">ä¼˜æƒ åˆ¸</text>
        <text class="menu-arrow">></text>
      </view>
    </view>
  </view>

  <!-- æ›´å¤šæœåŠ¡ -->
  <view class="menu-section">
    <view class="section-title">æ›´å¤šæœåŠ¡</view>
    <view class="menu-list">
      <view class="menu-item" bindtap="onContactTap">
        <view class="menu-icon-wrap">
          <text class="menu-icon">ğŸ’¬</text>
        </view>
        <text class="menu-label">è”ç³»å®¢æœ</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="onFeedbackTap">
        <view class="menu-icon-wrap">
          <text class="menu-icon">ğŸ“</text>
        </view>
        <text class="menu-label">æ„è§åé¦ˆ</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="onAboutTap">
        <view class="menu-icon-wrap">
          <text class="menu-icon">â„¹ï¸</text>
        </view>
        <text class="menu-label">å…³äºæˆ‘ä»¬</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="onSettingTap">
        <view class="menu-icon-wrap">
          <text class="menu-icon">âš™ï¸</text>
        </view>
        <text class="menu-label">è®¾ç½®</text>
        <text class="menu-arrow">></text>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="logout-section" wx:if="{{isLogin}}">
    <button class="logout-btn" bindtap="onLogoutTap">é€€å‡ºç™»å½•</button>
  </view>

  <!-- åº•éƒ¨å®‰å…¨åŒºåŸŸ -->
  <view class="safe-area"></view>
</view>
